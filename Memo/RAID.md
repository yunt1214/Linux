# RAID

## RAID란?

- 여러 개의 디스크를 하나의 디스크처럼 사용
- 비용 절감, 신뢰성 향상, 성능 향상의 효과를 냄

### Hardware RAID

- 하드웨어 제조업처에서 여러 개의 디스크를 하나의 디스크처럼 사용할 수 있게 장비를 만들어서 공급
- 소프트웨어 RAID보다 안정적이고, 제조업체의 기술지원을 받을 수 있음
- 비싸다.

### Software RAID

- 운영체제에서 지원하는 방식으로 RAID를 구성
- 저렴한 비용으로 RAID를 구성할 수 있으나 하드웨어 RAID보다 신뢰성이나 속도 등이 떨어질 수 있음

### RAID 0

- 스트라이핑
- 데이터가 디스크에 읽기/쓰기 병렬로 수행
- RAID 레벨 중 가장 빠름
- 100%의 공간 효율성 (단, 크기가 다른 디스크의 경우 작은 것을 기준)
- 신뢰성이 낮음 (디스크 하나에 오류가 발생하면 모든 데이터 손실)

### RAID 1

- 미러링
- 디스크에 중복 저장
- 중복 저장 => 공간 효율성 50% => 비용 두배
- 중복 저장 => 신뢰성 높음 (디스크 하나가 오류가 발생하더라도 다른 디스크에 데이터가 남아 있음)

### RAID 5

- RAID 1의 안정성 + 공간 효율성
- 최소 3개 이상의 디스크로 구성
- 오류가 발생할 때는 Parity를 이용하여 데이터 복구
- 1개의 디스크에 오류가 발생하더라도 원래의 데이터 추출 가능

### RAID 6

- 전체적인 구성은 RAID 5와 비슷함
- 최소 4개의 디스크가 필요
- 2개의 Parity bit를 사용하여 데이터 복구
- 2개의 디스크에 오류가 발생하더라도 원래 데이터 추출 가능
- RAID 5보다 공간 효율성 및 처리속도는 떨어지나 신뢰성 항샹

## RAID 구성

- mdadm 패키지로 구성

######

    # rpm -qa mdadm

### 1\. 구성하기 (파티션 생성 후)

    # mdadm --create /dev/md[ ] --level=[ ] --raid-device=[  ] /dev/sd[ ] /dev/sd[ ] ...

### 2\. 확인하기

    # cat /proc/mdstat

    # mdadm --detail /dev/md126

### 3\. 파일시스템 만들기

### 4\. UUID 적용

- mdadm --detail 이 아닌 blkid의 UUID를 사용

## 디스크 교체

- md126 (raid1) 디스크 1개가 고장났다고 가정. (sdd1)

######

    # mdadm /dev/md126 -f /dev/sdd1 // sdd1 고장설정
    # mdadm /dev/md126 -r /dev/sdd1 // sdd1 제거
    # mdadm /dev/md126 -a /dev/sdi1 // sdi1 추가
